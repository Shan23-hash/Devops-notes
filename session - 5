Class 5:

Today’s topics:

1.Permissions
2.ownership
3.Sudo access to user
4.Key based authentication
5.Package management
6.Service management

permissions
==============

In Linux, permissions control who can read, write, or execute files and directories. They're essential for security and user access management.
 Types of Permissions:
Permission	Symbol	Description
Read	r	View contents of a file or list files in a directory.
Write	w	Modify a file or create/delete files in a directory.
Execute	x	Run a file as a program or enter a directory.
Permission Categories:
Category	Applies To
Owner (user)	The user who owns the file.
Group	Users who are part of the file’s group.
Others	All other users.

Example Output (from ls -l):
-rwxr-xr-- 1 alice devs  1042 May  3 10:00 script.sh
-rwxr-xr-- → permissions:
Owner (alice): rwx = read, write, execute
Group (devs): r-x = read, execute
Others: r-- = read-only
Managing Permissions:
Task	Command
Change permissions	chmod
Change owner	chown
Change group	chgrp
Examples:
chmod 755 file.sh     # rwxr-xr-xchown alice:devs file.sh


R -> 4
W -> 2
X -> 1
-rw-		r--		r--
file/   user/            group	       others
	owner
directory     u       g       o

ec2-user ec2-user
user		group
 1  useradd shanthi
    2  sudo rm -f /etc/passwd.lock
    3  useradd shanthi
    4  sudo whoami
    5  sudo su -
    6  sudo su-
    7  sudo su -
    8  id
    9  id username
   10  sudo
   11   ls -l'
   12  ls -l
   13  touch devops.txt
   14  chmod ugo+w devops.txt
   15  ls -l
   16  chmod o-w devops.txt
   17  ls -l
   18  chmod ugo+rwx devops.txt
   19  ls -l
   20  chmod 700 devops.txt
   21  ls -l
   22  chmod 754 devops.txt
   23  ls -l
   24  cd /tmp
   25  ls -l
   26  touch aws.txt
   27  ls -l
   28  sudo useradd shanthi
   29  chmod shanthi aws.txt
   30  sudo chmod shanthi aws.txt
   31  sudo chown shanthi aws.txt
   32  ls -l
   33  sudo chown shanthi:shanthi aws.txt
   34  ls -l
   35  cd
   36  ls -la
   37  cd .ssh
   38  ls -l
   39  cat authorized_keys
   40  systemctl status sshd

chmod ugo+w devops.txt
chmod 700 devops.txt

only owner/root user can change the permissions

chown <user>:<group> devops.txt

file ownership can only be modified by root user
/etc/ssh/sshd_config

how can you give key based access to linux user?

ssh-keygen -f sivakumar

65,536 ports 0-65,535

1. create user
2. sivakumar can send his public key to admin user
3. /home/sivakumar admin creates .ssh in /home/sivakumar folder
4. sivakumar is the only owner to this folder... 700
5. create a file called authorized_keys with max access 600
6. admin keeps sivakumar public key here.
7. now sivakumar should be able to login
port is like flat number

computer system using the TCP/IP protocol supports 65,536 ports, numbered from 0 to 65,535.

Port Range	Purpose
0 – 1023	Well-known ports (reserved for system services like HTTP, SSH, DNS, etc.)
1024 – 49151	Registered ports (used by user or vendor software)
49152 – 65535	Dynamic / Private ports (used for temporary communication, e.g., ephemeral ports)


ssh -i <key> ec2-user@IP

  1  cd /tmp
    2  ls -l
    3  touch aws.txt
    4  ls -l
    5  sudo useradd shanthi
    6  sudo chown aws.txt
    7  sudo chown shanthi aws.txt
    8  sudo chown shanthi:shanthi aws.txt
    9  cd
   10  ls -la
   11  cd .ssh
   12  ls -l
   13  cat authorized_keys
   14  systemctl status sshd
   15  sudo su -
   16  cd
   17  ls -lrt
   18  ls
   19  whoami
   20  cd
   21  sudo su
   22  sudo su
   23  cd
   24  sudo
   25  sudo su -
   26  sudo su -
   27  useraddkranthikumar
   28  useradd sivakumar
   29  cd ../sivakumar/
   30  whoami
   31  sudo su
   32  ls -lrt
   33  useradd sivakumar
   34  cd ../sivakumar/
   35  cd ../ssh
   36  cd
   37  ls -la
   38  cd .ssh
   39  ls -la
   40  cat authorized_keys
   41  ls -l
   42  cd
   43  sudo su
   44  useradd sivakumar
   45  cd ../sivakumar
   46  cd /sivakumar
   47  ls -lrt
   48  cd ../sivakumar/
   49  is sivakumar
   50  id sivakumar
   51  cd ../
   52  ls -lrt
   53  cd
   54  ls -lrt
   55  sudo su
   56  cd
   57  sudo su
   58  useradd sivakumar
   59  cd ../sivakumar/
   60  pwd
   61  mkdir .ssh
   62  chmod 700 -R .ssh/
   63  ls -l
   64  ls -la
   65  cd .ssh/
   66  touch authorized_keys
   67  ls -l
   68  cat authorized_keys
   69  cat authorized_keys
   70  vim authorized_keys
   71  cat authorized_keys
   72  chmod 600 authorized_keys
   73  ls -l
   74  cd ../
   75  ls -la
   76  chown sivakumar:sivakumar -R .ssh/
   77  ls -la
   78  cd .ssh/
   79  ls -la
   80  cd
   81  vim /etc/sudoers
   82  usermod -aG wheel sivakumar
   83  id sivakumar
   84  cd 
   85  Sudo su
   86  vim /etc/sudoers
 
/etc/sudoers --> you can do changes to provide root access
or add user to wheel group without password


package management
====================
package manager connects to internet windows website. downloads them and install them

apt-get
yum/dnf

1.Whoami - root user
2.dnf install git
3.dnf remove git -f
4.dnf remove git -y
5.dnf list installed
6.dnf list available
7.dnf list available | grep python

dnf install <package-name>
/etc/yum.repos.d

service management
===================
Service management in Linux involves controlling background processes, known as services or daemons, which are typically managed using init systems such as Systemd, SysVinit, or Upstart (with Systemd being the most common on modern distributions).

systemctl start <service-name>
systemctl stop <service-name>
systemctl status <service-name>
systemctl restart <service-name>
systemctl enable <service-name>
systemctl disable <service-name>

install nginx and start it

protocol, port, ip, username and password

http		80  <IP>

1.sudo su -
2.dnf install nginx -y
3.systemctl start nginx
4.\systemctl status nginx
5.dnf install nginx -y
6.systemctl start nginx
7.systemctl status nginx
8.systemctl stop nginx
9.systemctl status nginx
10.systemctl stop nginx
11.systemctl status nginx
12.systemctl stop nginx
13.systemctl restart nginx
14.systemctl enable nginx
15.systemctl disable nginx
16.systemctl start nginx




1.Which is utility is used to create public and private key pairs for ssh authentication? 

ssh-keygen

2.Where is the private key stored by default? 

~/.ssh/id_rsa

3.When using vi or vim to edit a file,how do you exit without saving? 

:q!

4.How to delete a whole line in vim?
    
      dd

5.Which command-line tool is commonly used for downloading files in lunux?
     
wget

6.How can you display the first few lines of a file in linux?
     
head

7.Which port is normally required to be open for secure remote interactive shell access to linux system?
     
22

8.Which protocol is commonly used for secure remote access to servers?
     
ssh

9.What is the home folder for a user joindevops?
     
/home/joindevops
